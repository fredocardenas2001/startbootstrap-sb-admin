extends ../layouts/dashboard.pug

block config
    - var bodyClass = 'sb-nav-fixed'
    - var pageTitle = 'Dashboard';
    - var index = true;
    - var sidenavStyle = 'sb-sidenav-dark'

prepend css
    //- Load Simple DataTables Stylesheet
    link(href='https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css', rel='stylesheet')
    //- Tabulate-specific stylesheet
    link(rel='stylesheet', href='assets/css/tabulate.css')
    
append scripts
    script(src='js/tabulate.js' defer)

block content

  // Title
  .tabulate-container
    .tab-navbar
        span.navbar-title Tabulate

  
  // Toggle buttons
  .tabulate-toggle.tabulate-container
    button(type="button", id="showSubmit" class="active") Submit New Table
    button(type="button", id="showResults") View Previous Results

  // Submit section
  #submit-section
    .tabulate-container
      .controls
        button(type="button", onclick="addRow()")
          img(src="assets/img/add-row.svg" title="Add Row" height="24px" alt="Add Row")
        button(type="button", onclick="addColumn()")
          img(src="assets/img/add-column.svg" title="Add Column" height="24px" alt="Add Column")
        button(type="button", onclick="location.reload()")
          img(src="assets/img/start-over.svg" title="Start Over" height="24px"  alt="Reset Table")

      table#tabulate
          //- Row 0: column delete controls
          tr
            td
            td: button.delete-btn(onclick="deleteColumn(this)")
            td: button.delete-btn(onclick="deleteColumn(this)")

          //- Row 1: header row
          tr
            td
            td: textarea(placeholder="")
            td: textarea(placeholder="Query")

          //- Row 2: first data row
          tr
            td: button.delete-btn(onclick="deleteRow(this)")
            td: textarea(placeholder="project or filter")
            td: textarea(placeholder="")

  // Manifest list
  #results-section
    .results-header
      button#refreshManifest(type="button")
        img(src="assets/img/start-over.svg" title="Refresh" height="20px" alt="Refresh Table")
        | Refresh
    table#manifestTable
      thead
        tr
          th Submitted
          th Completed
          th Duration
          th Queries
      tbody


  // Detail view (hidden until you click a row)
  #result-detail.tabulate-container(style="display:none")
    button(type="button", onclick="showManifest()") â¬… Back to Manifest
    // detail content injected here by renderResultDetail()
  
  // Submission confirmation modal (hidden by default)
  #submissionModal.modal-overlay(style="display:none;")
    .modal-box
      h2 Submission Sent
      p#modalMessage Your tabulate query has been submitted successfully.
      button#modalOkBtn(type="button") OK








